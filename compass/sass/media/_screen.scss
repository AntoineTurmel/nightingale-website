/*!
 * Screen styles.
 */
 
@media screen {
  // Variables

    $sidebar-item-height: 8em;
    
  $onecolumn: 2*$column-width+3*$gutter-width;
  $twocolumns: 4*$column-width+5*$gutter-width;
  $allcolumns: 6*$column-width+7*$gutter-width;
  
  $orange: #b55029;

    /* -------------------------------------------------------------------------*/
    /* Layout */
    html {
        @include background-image(linear-gradient(#414141,#333333));
        
        min-height: 100%;
    }

    body>.wrapper>.container {
        padding-left: $gutter-width;
        padding-right: $gutter-width;
        max-width: $allcolumns;
    }
    
    body>.wrapper {
        width: 100%;
    }

    /* ----------------------------------------------------------------------------
       Nav
       --------------------------------------------------------------------------*/
    
    #headerlogo {
        position: absolute;
        top: .5em;
    }
    
    #headerlogo img {
        max-height: 9em;
        max-width: 27em;
        width: 100%;
        position: relative;
        z-index: 10;
    }
    
    #ngalemainheadwrapper .tab {
        width: 92.59%;
        height: 77.77%;
        top: 1.1em;
        left: 1em;
        position: absolute;
        
        &::before,&::after {
            content: "";
            height: 6em;
            width: 5em;
            position: absolute;
            top: -.15em;
        }
        
        &::before {
            @include transform-origin(top, left, false);
            @include rotate(20deg);
            left: -.2em;
            @include border-top-left-radius(.5em);
        }
        &::after {
            @include transform-origin(top, right, false);
            @include rotate(-20deg);
            right: -.2em;
            @include border-top-right-radius(.5em);
        }
    }
    
    #birdtab {
        background: white;
        z-index: 9;
        
        &::before,&::after {
            background: white;
        }
    }
    
    #tabshadow {
        z-index: 0;
        @include single-box-shadow(#292929,0,0,.4em,.1em);
        
        &::before,&::after {
            @include single-box-shadow(#292929,0,0,.4em,.1em);
        }
    }
    
    #birdtab {
        background: white;
        z-index: 9;
        
        &::before,&::after {
            background: white;
        }
    }

    #ngalemainheadwrapper header {
        position: relative;
        height: 5em;

        nav, nav ul {
            height: 100%;
        }    
        nav {
            float: right;
            z-index: 2;
            position: relative;
            
            li {
                float: left;
                height: 100%;
                @include box-sizing(border-box);

                :link,:visited {
                    color: white;
                    height: 100%;
                    padding-left: .5rem;
                    padding-right: .5rem;
                    font-size: 1.25em;
                    line-height: 5rem;
                    text-decoration: none;
                    text-shadow: .1rem .1rem .3rem black;
                    display: block;
                    @include box-sizing(border-box);
                }
                a:hover {
                    border-bottom: .5rem solid white;
                }
                &.current a:link,&.current a:visited {
                    border-bottom: .5rem solid $orange;
                }
            }
        }
    }
    /* ----------------------------------------------------------------------------
       Main content
       --------------------------------------------------------------------------*/
    #wrapper {
        background: white;
        
        @include single-box-shadow(#292929,0,0,.4em,.1em);
        
        padding-top: 4*$base-line-height;
        padding-bottom: $base-line-height;
        margin-bottom: $base-line-height;
        
        position: relative;
        z-index: 1;
    }

    #screenshots {
        background: blue;
        height: 2*$sidebar-item-height + px2em($base-line-height);
        margin-bottom: $base-line-height;
        position: relative;
    }
    
    #downloadbutton {
        text-align: right;
        color: white;
        border: 2px solid #343434;
        @include border-radius(3px);
        @include background-image(linear-gradient(#444444,#343434));
        @include single-box-shadow(#fff,0,0,1em,.1em);
        height: 4.5em;
        width: 18em;
        padding:0 1.25em;
        position: absolute;
        bottom: 0;
        left: 2*$column-width + 1.5*$gutter-width - 9em;          
        
        small {
            color: $orange;
        }
        
        img {
            float: left;
            margin-right: 1.25em;
            margin-top: .9375em;
            height: 2.375em;
            width: 2.375em;
        }
    }
    
    #downloadbutton small {
        color: $orange;
    }

    /* ----------------------------------------------------------------------------
       Features sidebar
       --------------------------------------------------------------------------*/
        #main aside {
            float: right;
            width: $onecolumn;            
        }

    
    .feature {
        height: $sidebar-item-height;
        margin-bottom: $base-line-height;
        
        img {            
            max-height: $sidebar-item-height;
            max-width: 50%;
            float: left;
            margin-right: $gutter-width;
        }

        figcaption {
            font-style: normal;
            text-align: left;
        }
    }

    /* ----------------------------------------------------------------------------
       Footer
       --------------------------------------------------------------------------*/
    
    
    #ngalemainfooterwrapper footer {
        color: white;
        
        :link,:visited {
            color: white;
        }
        
        a:hover {
            color: #f0f0f0;
        }
        
        ul {
           margin: 0; 
        }
    }
    
    .footerlinks {
        float: right;
        width: $column-width;
    }
    
    #footergale {
        float: left;
        max-height: image-height("footergale.png");
        max-width: image-width("footergale.png");
        width: 100%;
        margin-right: $gutter-width;
        
    }
       
    #footerinfo p {
        margin-top: 0;
    }
    
    @include at-breakpoint($onecolumn) {
        #description {
            @include column-width(columns(2,4));
            @include column-count(2);
            @include column-gap(gutter(6));
        }
        
        .feature {
            img {
                @include span-columns(1,2);
                width: columns(1,2);
                margin-right: 0;
            }
            figcaption {
                @include span-columns(1 omega,2);
            }
        }
    }
    
    @include at-breakpoint(0 28em) {
        #ngalemainheadwrapper .tab {
            left: 0;
        }
    }
    
    @include at-breakpoint(0 $allcolumns) {
        #headerlogo {
            top: 5.5em;
        }
        #ngalemainheadwrapper header {
            padding-bottom: 5em;
        }
    }
    
    @include at-breakpoint($allcolumns 6) {
        .container {
          @include container();
        }
        
        #contentleft {
            @include span-columns(4);
        }
        
        #main aside {
            @include span-columns(2 omega);
        }
        
        .feature {
            @include span-columns(2 omega,2);
            img {
                @include span-columns(1,2);
            }
            
            figcaption {
                @include span-columns(1 omega,2);
            }
        }
        
        #ngalemainfooterwrapper .footerlinks {
            @include span-columns(1);
            @include nth-omega(3n);
        }
        
        #footerinfo {
            @include span-columns(3);
        }
    }
    
    @include at-breakpoint($twocolumns 4 $allcolumns) {
        .container {
          @include container();
        }
        
        #ngalemainheadwrapper header nav li {
            :link,:visited {
                border-top: .5rem solid transparent;
            }
            a:hover {
                border-top: .5rem solid white;
                border-bottom: none;
            }
            &.current a:link,&.current a:visited {
                border-top: .5rem solid #b55029;
                border-bottom: none;
            }
        }
        
        #main aside {
            @include span-columns(4);
            margin-top: $base-line-height;
        }
        
        .feature {
            @include span-columns(2);
            @include nth-omega(2n);
        }
        .feature:last-child {
            @include post(2);
        }
        .footerlinks {
            @include span-columns(1);
        }
        #footerinfo {
            @include span-columns(3);
        }
    }
    
    @include at-breakpoint($onecolumn 2 $twocolumns) {
        .container {
          @include container();
        }
        
        #ngalemainheadwrapper header {
            
            //todo: uses alternative mobile menu
        }
        
        #main  aside {
            @include span-columns(2);
            margin-top: $base-line-height;
        }
        .footerlinks {
            @include span-columns(1);
            @include nth-omega(2n);
            margin-top: $base-line-height;
        }
        #footerinfo {
            @include span-columns(2);
        }
    }
    
    // optimize the gridless layout for small screens
    @include at-breakpoint(1 $onecolumn) {
        
        #main aside {
            margin-top: $base-line-height;
            float: none;
            width: 100%;
        }
        
        #ngalemainheadwrapper header {
            
            //todo: alternative mobile menu
        }
        
        .footerlinks {
            float: none;
            margin-top: $base-line-height;
        }
        // make footergale a column wide
    }
}
