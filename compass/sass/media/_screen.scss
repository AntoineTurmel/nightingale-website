/*!
 * Screen styles.
 */
 
@media screen {
  // Variables

    $sidebar-item-height: 8em;
    
  $onecolumn: 2*$column-width+3*$gutter-width;
  $twocolumns: 4*$column-width+5*$gutter-width;
  $allcolumns: 6*$column-width+7*$gutter-width;

    /* -------------------------------------------------------------------------*/
    /* Layout */
    html {
        @include background-image(linear-gradient(#414141,#333333));
        
        min-height: 100%;
    }

    .container {
        padding: 0 $gutter-width;
    }
    
    .wrapper {
        width: 100%;
    }

    /* ----------------------------------------------------------------------------
       Nav
       --------------------------------------------------------------------------*/
    
    #headerlogo {
        position: absolute;
        top: .5em;
    }
    
    #headerlogo img {
        height: 9em;
        width: 27em;
        position: relative;
        z-index: 10;
    }
    
    .tab {
        width: 25em;
        height: 7em;
        top: 1.1em;
        left: 1em;
        position: absolute;
        
        &::before,&::after {
            content: "";
            height: 6em;
            width: 5em;
            @include border-radius(.5em);
            position: absolute;
            top: .54em;
        }
        
        &::before {
            @include rotate(20deg);
            left: -1.49em;
        }
        &::after {
            @include rotate(-20deg);
            right: -1.49em;
        }
    }
    
    #birdtab {
        background: white;
        z-index: 9;
        
        &::before,&::after {
            background: white;
        }
    }
    
    #tabshadow {
        z-index: 0;
        @include single-box-shadow(#292929,0,0,.4em,.1em);
        
        &::before,&::after {
            @include single-box-shadow(#292929,0,0,.4em,.1em);
        }
    }
    
    #birdtab {
        background: white;
        width: 25em;
        height: 7em;
        top: 1.1em;
        left: 1em;
        position: absolute;
        z-index: 9;
        
        &::before,&::after {
            content: "";
            height: 6em;
            width: 5em;
            @include border-radius(.5em);
            background: white;
            position: absolute;
            top: .54em;
        }
        
        &::before {
            @include rotate(20deg);
            left: -1.49em;
        }
        &::after {
            @include rotate(-20deg);
            right: -1.49em;
        }
    }

    header {
        position: relative;
        height: 5em;

        nav, nav ul {
            height: 100%;
        }    
        nav {
            float: right;
            z-index: 2;
            position: relative;
            
            li {
                float: left;
                height: 100%;
                @include box-sizing(border-box);

                :link,:visited {
                    color: white;
                    height: 100%;
                    padding-left: .5rem;
                    padding-right: .5rem;
                    font-size: 1.25em;
                    line-height: 5rem;
                    text-decoration: none;
                    text-shadow: .1rem .1rem .3rem black;
                    display: block;
                    @include box-sizing(border-box);
                }
                a:hover {
                    border-bottom: .5rem solid white;
                }
                &.current a:link,&.current a:visited {
                    border-bottom: .5rem solid #b55029;
                }
            }
        }
    }
    /* ----------------------------------------------------------------------------
       Main content
       --------------------------------------------------------------------------*/
    #wrapper {
        background: white;
        
        @include single-box-shadow(#292929,0,0,.4em,.1em);
        
        padding-top: 4*$base-line-height;
        padding-bottom: $base-line-height;
        margin-bottom: $base-line-height;
        
        position: relative;
        z-index: 1;
    }

    #screenshots {
        background: blue;
        height: 2*$sidebar-item-height + $gutter-width;
        margin-bottom: $base-line-height;
    }

    /* ----------------------------------------------------------------------------
       Features sidebar
       --------------------------------------------------------------------------*/
        #main aside {
            float: right;
            width: $onecolumn;            
        }

    
    .feature {
        height: $sidebar-item-height;
        margin-bottom: $base-line-height;
        
        img {            
            height: $sidebar-item-height;
            width: 50%;
            float: left;
            margin-right: $gutter-width;
        }

        figcaption {
            font-style: normal;
            text-align: left;
        }
    }

    /* ----------------------------------------------------------------------------
       Footer
       --------------------------------------------------------------------------*/
    footer {
        color: white;
        
        :link,:visited {
            color: white;
        }
        
        a:hover {
            color: #f0f0f0;
        }
        
        ul {
           margin: 0; 
        }
    }
    
    .footerlinks {
        float: right;
        width: $column-width;
    }
    
    #footergale {
        float: left;
        height: 9em;
    }
       
    #footerinfo p {
        margin-top: 0;
    }
    
    @include at-breakpoint($onecolumn) {
        #description {
            @include column-width(columns(2,4));
            @include column-count(2);
            @include column-gap(gutter(6));
        }
        
        .feature {
            img {
                width: columns(1,2);
                float: none;
                margin-right: 0;
            }
        }
    }
    
    @include at-breakpoint($allcolumns 6) {
        .container {
          @include container();
        }
               
        #main article {
            @include span-columns(4);
        }
        
        #screenshots {
            @include span-columns(4 omega,4);
        }
        
        #description {
            @include span-columns(4 omega, 4);
        }
        
        #main aside {
            @include span-columns(2 omega);
        }
        
        .feature {
            @include span-columns(2 omega,2);
            img {
                @include span-columns(1,2);
            }
            
            figcaption {
                @include span-columns(1 omega,2);
            }
        }
        
        footer {
            .footerlinks {
                @include span-columns(1);
                @include nth-omega(3n);        
            }
        }
        
        #footerinfo {
            @include span-columns(3);
        }
    }
    
    @include at-breakpoint($twocolumns 4 $allcolumns) {
        .container {
          @include container();
        }
        #headerlogo {
            top: 5.5em;
        }
        
        header {
            padding-bottom: 5em;
        }
        
        #main {
            article {
                @include span-columns(4 omega);
            }
            aside {
                @include span-columns(4 omega);
            }
        }
        
        .feature {
            @include span-columns(2);
            @include nth-omega(2n);
        }
        .feature:last-child {
            @include post(2);
        }
        .footerlinks {
            @include span-columns(1);
        }
        #footerinfo {
            @include span-columns(3);
        }
    }
    
    @include at-breakpoint($onecolumn 2 $twocolumns) {
        .container {
          @include container();
        }
        
        #headerlogo {
            top: 5.5em;
        }
        
        header {
            padding-bottom: 5em;
        }
        
        #main {
            article {
                @include span-columns(2 omega);
                #screenshots, #description {
                    @include span-columns(2 omega);
                }
            }
            aside {
                @include span-columns(2 omega);
            }
        }
        .feature {
            @include span-columns(2);
            @include nth-omega(2n);
        }
        .footerlinks {
            @include span-columns(1);
            @include nth-omega(2n);
        }
        #footerinfo {
            @include span-columns(2);
        }
    }
    
    // optimize the gridless layout for small screens
    @include at-breakpoint(1 $onecolumn) {        
        #headerlogo {
            top: 5.5em;
        }
        
        #main aside {
            margin-top: $base-line-height;
            float: none;
        }
        
        header {
            padding-bottom: 5em;
        }
        
        .footerlinks {
            float: none;
            margin-top: $base-line-height;
        }
        // make footergale a column wide
    }
}
